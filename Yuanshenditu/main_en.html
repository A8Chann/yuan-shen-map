<!DOCTYPE html>
<html>

<head>
	<meta name="keywords" content="Genshin,Genshin Map,Genshin Impact Map,Genshin Impact Interactive Map,原神, 原神地图, 原神攻略, 原神宝箱位置" />
	<meta name="description" content="The interactive map of Genshin full resources strategy made by Kongying Tavern." />
	<meta name="baidu-site-verification" content="code-GKb2vGn6sE" />
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
	<title>Genshin Map</title>
	<meta charset="utf-8">
	<script>
		var _hmt = _hmt || [];
		(function () {
			var hm = document.createElement("script");
			hm.src = "https://hm.baidu.com/hm.js?cd4f7eed0a6e62d83b92c5dfb9f1a20f";
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(hm, s);
		})();
	</script>
</head>
<script src="js/jquery-3.5.1.min.js"></script>

<body>
	Thanks for your support, the new client is being made, You can <a href="https://www.paypal.me/yuanshenditu" target="_bal" class="zanzhu">donate us</a> for speeding up our production.
	</br>Users will still be able to use the online map. We will also provide map client support and support for importing the data you have marked on the site (If you have logged in and your data has been uploaded to gitee).
</br></br>(Current Client's version: Beta1.8.1)(All in Chinese without other languages)</br> link：<a href="https://drive.google.com/file/d/1N4JN8Q_1UxjfGbGjnaVYeKLRtEqO5DYF/view?usp=sharing"
		target="_blank">https://drive.google.com/file/d/1N4JN8Q_1UxjfGbGjnaVYeKLRtEqO5DYF/view?usp=sharing</a>
	</br>
</body>
<script>
	// 复制的方法
	function copyText(text, callback) { // text: 要复制的内容， callback: 回调
		var tag = document.createElement('input');
		tag.setAttribute('id', 'cp_hgz_input');
		tag.value = text;
		document.getElementsByTagName('body')[0].appendChild(tag);
		document.getElementById('cp_hgz_input').select();
		document.execCommand('copy');
		document.getElementById('cp_hgz_input').remove();
		if (callback) {
			callback(text)
		}
	}
	$("#submitMarker").click(function () {
		var markedLog = []
		for (var i = 0; i < localStorage.length; i++) {
			var key = localStorage.key(i); //获取本地存储的Key
			if (localStorage.getItem(key) == 1) markedLog.push(key); //所有value
		}
		var eleLink = document.createElement('a');
		eleLink.download = 'markers.json';
		eleLink.style.display = 'none';
		var blob = new Blob([JSON.stringify(markedLog)]);
		eleLink.href = URL.createObjectURL(blob);
		document.body.appendChild(eleLink);
		eleLink.click();
		document.body.removeChild(eleLink);

		toolresult = JSON.stringify(markedLog);
		var texts = toolresult
		copyText(texts, function () {
			alert('复制成功 \n复制内容:' + texts + '\n如果您在当前地图上有标记数据但是这里显示"[]",请与管理员联系恢复您的数据QQ790489566')
		})
		console.log(toolresult);
	})

	$("#submitMarker2").click(function () {
		var markedLog = []
		for (var i = 0; i < localStorage.length; i++) {
			var key = localStorage.key(i); //获取本地存储的Key
			if (localStorage.getItem(key) == 1) markedLog.push(key); //所有value
		}
		toolresult = JSON.stringify(markedLog);
		var texts = toolresult
		copyText(texts, function () {
			alert('复制成功 \n复制内容:' + texts + '\n如果您在当前地图上有标记数据但是这里显示"[]",请与管理员联系恢复您的数据QQ790489566')
		})
		console.log(toolresult);
	})
	//指定某layer清空
	$("#clearSomeLayer").click(function () {
		var layerId = 26;
		for (var i = 0; i < 1200; i++) {
			var key = layerId + "_" + i;
			localStorage.setItem(key, "");
		}
	})
	//全部清空
	$("#clearAllLayer").click(function () {
		var msg = "您确定要清空所有标记吗？您可以先保存数据到本地再进行操作以免数据丢失。";
		if (confirm(msg) == true) {
			localStorage.clear();
			alert("所有标记已清空");
			return true; //你也可以在这里做其他的操作
		} else {
			return false;
		}
	})
	$("#enterIndex").click(function () {
		window.event.returnValue = false;
		window.location.href = 'index.html';
	})
	$("#enterIndex2").click(function () {
		window.event.returnValue = false;
		window.location.href = 'index_old.html';
	})
	$("#update").click(function () {
		window.event.returnValue = false;
		window.location.href = 'shangchuan.html';
	})
</script>

</html>