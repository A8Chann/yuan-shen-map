<!DOCTYPE html>
<html lang="jp">

<head>
	<title>原神地図</title>
	<meta name="keywords" content="原神地図,Genshin,Genshin Impact Map" />
	<meta name="description" content="「米游社空荧酒馆」が作成した原神全資源攻略マップ。" />
	<meta name="baidu-site-verification" content="code-GKb2vGn6sE" />
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
	<meta charset="utf-8">
	<script>
		var _hmt = _hmt || [];
		(function () {
			var hm = document.createElement("script");
			hm.src = "https://hm.baidu.com/hm.js?cd4f7eed0a6e62d83b92c5dfb9f1a20f";
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(hm, s);
		})();
	</script>
</head>
<script src="js/jquery-3.5.1.min.js"></script>

<body>
	皆さんのご支援に感謝して、単体版は既に販売終了となり、新しいクライアントを制作中です。<a href="https://yuanshen.site/juanzhu/juanzhu.html" target="_bal" class="zanzhu">私たちを助ける</a>
	</br>地図チャットQQ: 1. 765302904（未満）；2. 853210278（未満）；3. 932683801（未満）；4. 1139510554（未満）；5. 1149599151（未満）；6. 1168337427（未満
	</br>ベータクライアントBeta1.7.1のダウンロードリンク: <a href="https://pan.baidu.com/s/1_9NKgFQLDJGsUnbvNuphDg" target="_bal">https://pan.baidu.com/s/1_9NKgFQLDJGsUnbvNuphDg</a>提取码：KYJG あなたもQQをプラスすることができます~ダウンロード~😉
	</br><button id="submitMarker">マーカー記録をコピーしてダウンロードします</button> 【暖かいヒント】エクスポートしたデータの内容をインポート欄のオフライン版にコピーし、コミットすればokです
	</br>
	</br>PS.オンラインマップでアーカイブをクリックしてもポイント記録をダウンロードしてカットボードに記録するか、下のボタンでポイント記録のアップロードページにジャンプします
	</br>
	</br><button id="update">[ジャンプ]をクリックしてアップロードページに移動します</button>
	</br>
	</br><button id="enterIndex">オンラインマップの統合版に入ります</button>
	</br>
	</br><button id="enterIndex2">オンラインマップの無統合版に入ります</button>
	</br>
	<!-- </br><b>公告：现全部站点已转https://yuanshen.site，若您是多站点用户，您可以<a href="backfall.html">点击此处</a>转到旧站点保存您的站点数据</b> -->
	</br><b>お知らせ:現在、すべてのサイトが転送されていますhttps://yuanshen.site。マルチサイトユーザーの場合は、<a href="backfall.html">ここをクリッ</a>クしてサイトデータを保存するために旧サイトに移動することができます</b>
</body>
<script>
	const AdminMailStr = 'メールに連絡する: 790489566@qq.com';
	// 复制的方法
	function copyText(text, callback) { // text: 要复制的内容， callback: 回调
		var tag = document.createElement('input');
		tag.setAttribute('id', 'cp_hgz_input');
		tag.value = text;
		document.getElementsByTagName('body')[0].appendChild(tag);
		document.getElementById('cp_hgz_input').select();
		document.execCommand('copy');
		document.getElementById('cp_hgz_input').remove();
		if (callback) {
			callback(text)
		}
	}
	$("#submitMarker").click(function () {
		var markedLog = []
		for (var i = 0; i < localStorage.length; i++) {
			var key = localStorage.key(i); //获取本地存储的Key
			if (localStorage.getItem(key) == 1) markedLog.push(key); //所有value
		}
		var eleLink = document.createElement('a');
		eleLink.download = 'markers.json';
		eleLink.style.display = 'none';
		var blob = new Blob([JSON.stringify(markedLog)]);
		eleLink.href = URL.createObjectURL(blob);
		document.body.appendChild(eleLink);
		eleLink.click();
		document.body.removeChild(eleLink);

		toolresult = JSON.stringify(markedLog);
		var texts = toolresult
		copyText(texts, function () {
			alert('複製に成功する \n内容を複製する:' + texts + '\nn現在の地図上にマークアップデータがあるがここに"[]"を表示する場合,管理者に連絡してデータを復元してください' + AdminMailStr)
		})
		console.log(toolresult);
	})

	$("#submitMarker2").click(function () {
		var markedLog = []
		for (var i = 0; i < localStorage.length; i++) {
			var key = localStorage.key(i); //获取本地存储的Key
			if (localStorage.getItem(key) == 1) markedLog.push(key); //所有value
		}
		toolresult = JSON.stringify(markedLog);
		var texts = toolresult
		copyText(texts, function () {
			alert('複製に成功する \n内容を複製する:' + texts + '\nn現在の地図上にマークアップデータがあるがここに"[]"を表示する場合,管理者に連絡してデータを復元してください' + AdminMailStr)
		})
		console.log(toolresult);
	})
	//指定某layer清空
	$("#clearSomeLayer").click(function () {
		var layerId = 26;
		for (var i = 0; i < 1200; i++) {
			var key = layerId + "_" + i;
			localStorage.setItem(key, "");
		}
	})
	//全部清空
	$("#clearAllLayer").click(function () {
		var msg = "すべてのマークを空にしますか?データをローカルに保存してから操作することで、データの損失を防ぐことができます。";
		if (confirm(msg) == true) {
			localStorage.clear();
			alert("すべてのマークが空になった");
			return true; //你也可以在这里做其他的操作
		} else {
			return false;
		}
	})
	$("#enterIndex").click(function () {
		window.event.returnValue = false;
		window.location.href = 'index.html';
	})
	$("#enterIndex2").click(function () {
		window.event.returnValue = false;
		window.location.href = 'index_old.html';
	})
	$("#update").click(function () {
		window.event.returnValue = false;
		window.location.href = 'shangchuan.html';
	})
</script>

</html>
